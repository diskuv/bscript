<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Diskuvbox (diskuvbox.Diskuvbox)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">diskuvbox</a> &#x00BB; Diskuvbox</nav><header class="odoc-preamble"><h1>Module <code><span>Diskuvbox</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-box_error" class="anchored"><a href="#type-box_error" class="anchor"></a><code><span><span class="keyword">type</span> box_error</span><span> = <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>The type for managing errors during box operations.</p><p>During a box operation, any error messages are given to this function. This function can log the error, modify the error message, or raise the error immediately.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-walk_path" class="anchored"><a href="#type-walk_path" class="anchor"></a><code><span><span class="keyword">type</span> walk_path</span><span> = </span></code><table><tr id="type-walk_path.Root" class="anchored"><td class="def variant constructor"><a href="#type-walk_path.Root" class="anchor"></a><code><span>| </span><span><span class="constructor">Root</span></span></code></td></tr><tr id="type-walk_path.File" class="anchored"><td class="def variant constructor"><a href="#type-walk_path.File" class="anchor"></a><code><span>| </span><span><span class="constructor">File</span> <span class="keyword">of</span> <span class="xref-unresolved">Fpath</span>.t</span></code></td></tr><tr id="type-walk_path.Directory" class="anchored"><td class="def variant constructor"><a href="#type-walk_path.Directory" class="anchor"></a><code><span>| </span><span><span class="constructor">Directory</span> <span class="keyword">of</span> <span class="xref-unresolved">Fpath</span>.t</span></code></td></tr></table></div><div class="spec-doc"><p>The type of path seen during a <a href="#val-walk_down"><code>walk_down</code></a> operation</p></div></div><div class="odoc-spec"><div class="spec type" id="type-path_attribute" class="anchored"><a href="#type-path_attribute" class="anchor"></a><code><span><span class="keyword">type</span> path_attribute</span><span> = </span></code><table><tr id="type-path_attribute.First_in_directory" class="anchored"><td class="def variant constructor"><a href="#type-path_attribute.First_in_directory" class="anchor"></a><code><span>| </span><span><span class="constructor">First_in_directory</span></span></code></td></tr><tr id="type-path_attribute.Last_in_directory" class="anchored"><td class="def variant constructor"><a href="#type-path_attribute.Last_in_directory" class="anchor"></a><code><span>| </span><span><span class="constructor">Last_in_directory</span></span></code></td></tr></table></div><div class="spec-doc"><p>Attributes of the path</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Path_attributes" class="anchored"><a href="#module-Path_attributes" class="anchor"></a><code><span><span class="keyword">module</span> Path_attributes</span><span> : <span class="xref-unresolved">Stdlib</span>.Set.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">elt</span> = <span class="xref-unresolved">path_attribute</span></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-walk_down" class="anchored"><a href="#val-walk_down" class="anchor"></a><code><span><span class="keyword">val</span> walk_down : 
  <span>?err:<a href="#type-box_error">box_error</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?max_depth:int <span class="arrow">&#45;&gt;</span></span>
  <span>from_path:<span class="xref-unresolved">Fpath</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span>f:
    <span>( <span>depth:int <span class="arrow">&#45;&gt;</span></span>
      <span>path_attributes:<span class="xref-unresolved">Path_attributes</span>.t <span class="arrow">&#45;&gt;</span></span>
      <span><a href="#type-walk_path">walk_path</a> <span class="arrow">&#45;&gt;</span></span>
      <span><span>( unit, string )</span> <span class="xref-unresolved">Stdlib</span>.result</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>( unit, string )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>walk_down ?err ?max_depth ~from_path ~f ()</code> visits the file <code>from_path</code> or walks down a directory tree <code>file_path</code>, executing <code>f ~depth ~path_attributes path</code> on every file and directory.</p><p>Symlinks are followed.</p><p>When <code>from_path</code> is a file, <code>f</code> will be called on <code>from_path</code> and that is the completion of the <code>walk_down</code> procedure.</p><p>When <code>from_path</code> is a directory, the traversal is pre-order, meaning that <code>f</code> is called on a directory <code>&quot;A&quot;</code> before <code>f</code> is called on any children of directory <code>&quot;A&quot;</code>. All children in a directory are traversed in lexographical order.</p><p>The <code>path</code> in <code>f ~depth ~path_attributes path</code> will be <code>Root</code> if the current file or directory is <code>from_path</code>; otherwise the <code>path = File relpath</code> or <code>path = Directory relpath</code> has a <code>relpath</code> which is a relative path from <code>from_path</code> to the current file or directory.</p><p>The <code>depth</code> in <code>f ~depth ~path_attributes path</code> will be an integer from 0 to <code>max_depth</code>, inclusive.</p><p>At most <code>max_depth</code> descendants of <code>from_path</code> will be walked. When <code>max_depth</code> is <code>0</code> no descent into a directory is ever conducted. The default <code>max_depth</code> is 0.</p><p>Any error is passed to <code>err</code> if it is specified. The default <code>err</code> is the identity function <code>Fun</code>.id.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-find_up" class="anchored"><a href="#val-find_up" class="anchor"></a><code><span><span class="keyword">val</span> find_up : 
  <span>?err:<a href="#type-box_error">box_error</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?max_ascent:int <span class="arrow">&#45;&gt;</span></span>
  <span>from_dir:<span class="xref-unresolved">Fpath</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span>basenames:<span><span class="xref-unresolved">Fpath</span>.t list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="xref-unresolved">Fpath</span>.t option</span>, string )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>find_up ?err ?max_ascent ~from_dir ~basenames ()</code> searches the directory <code>from_dir</code> for any file with a name in the list <code>basenames</code>. If not found, the parent directory of <code>from_dir</code> is searched for the file named in <code>basenames</code>.</p><p>At most <code>max_ascent</code> ancestors of <code>from_dir</code> will be searched until the file is found. The default <code>max_ascent</code> is 20. If the file is still not found, the function returns <code>Ok None</code>.</p><p>An error is reported if <code>from_dir</code> is not an existing directory.</p><p>An error is reported if any of the <code>basenames</code> names are not true basenames (there should be no directory components like &quot;.&quot; or &quot;..&quot; or &quot;/&quot;).</p><p>Any error is passed to <code>err</code> if it is specified. The default <code>err</code> is the identity function <code>Fun</code>.id.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-touch_file" class="anchored"><a href="#val-touch_file" class="anchor"></a><code><span><span class="keyword">val</span> touch_file : 
  <span>?err:<a href="#type-box_error">box_error</a> <span class="arrow">&#45;&gt;</span></span>
  <span>file:<span class="xref-unresolved">Fpath</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>( unit, string )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>touch_file ?err ~file ()</code> creates the file <code>file</code> if it does not exist, creating <code>file</code>'s parent directories as necessary. If the <code>file</code> already exists its access and modification times are updated.</p><p>Any error is passed to <code>err</code> if it is specified. The default <code>err</code> is the identity function <code>Fun</code>.id.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-copy_file" class="anchored"><a href="#val-copy_file" class="anchor"></a><code><span><span class="keyword">val</span> copy_file : 
  <span>?err:<a href="#type-box_error">box_error</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?mode:int <span class="arrow">&#45;&gt;</span></span>
  <span>src:<span class="xref-unresolved">Fpath</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span>dst:<span class="xref-unresolved">Fpath</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>( unit, string )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>copy_file ?err ?mode ~src ~dst ()</code> copies the file <code>src</code> to the file <code>dst</code>, creating <code>dst</code>'s parent directories as necessary.</p><p>If <code>mode</code> is specified, the chmod <code>mode</code> will be applied to <code>dst</code>. Otherwise the chmod mode is copied from <code>src</code>.</p><p>Any error is passed to <code>err</code> if it is specified. The default <code>err</code> is the identity function <code>Fun</code>.id.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-copy_dir" class="anchored"><a href="#val-copy_dir" class="anchor"></a><code><span><span class="keyword">val</span> copy_dir : 
  <span>?err:<a href="#type-box_error">box_error</a> <span class="arrow">&#45;&gt;</span></span>
  <span>src:<span class="xref-unresolved">Fpath</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span>dst:<span class="xref-unresolved">Fpath</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>( unit, string )</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p><code>copy_dir ?err ~src ~dst ()</code> copies the contents of <code>src</code> into <code>dst</code>, creating <code>dst</code> and any parent directories as necessary.</p><p>Any error is passed to <code>err</code> if it is specified. The default <code>err</code> is the identity function <code>Fun</code>.id.</p></div></div></div></body></html>